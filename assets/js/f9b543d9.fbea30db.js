"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7609],{28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var i=s(96540);const r={},t=i.createContext(r);function c(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(t.Provider,{value:n},e.children)}},53764:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"users/commands/subscribe","title":"subscribe","description":"This document provides an overview of the commands and options available under buck2 subscribe.","source":"@site/../docs/users/commands/subscribe.generated.md","sourceDirName":"users/commands","slug":"/users/commands/subscribe","permalink":"/docs/users/commands/subscribe","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"subscribe","title":"subscribe"},"sidebar":"main","previous":{"title":"status","permalink":"/docs/users/commands/status"},"next":{"title":"targets","permalink":"/docs/users/commands/targets"}}');var r=s(74848),t=s(28453);const c={id:"subscribe",title:"subscribe"},o="subscribe",d={},l=[{value:"<code>buck2 subscribe</code>",id:"buck2-subscribe",level:2},{value:"Options:",id:"options",level:3}];function a(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"subscribe",children:"subscribe"})}),"\n",(0,r.jsxs)(n.p,{children:["This document provides an overview of the commands and options available under ",(0,r.jsx)(n.code,{children:"buck2 subscribe"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"buck2-subscribe",children:(0,r.jsx)(n.code,{children:"buck2 subscribe"})}),"\n",(0,r.jsxs)(n.p,{children:["Open a subscription channel to the Buck2 daemon. This allows you to interact with the Buck2 daemon via the ",(0,r.jsx)(n.code,{children:"stdin"})," and ",(0,r.jsx)(n.code,{children:"stdout"})," of this command: you send requests to the daemon by writing to ",(0,r.jsx)(n.code,{children:"stdin"}),", and you get responses via ",(0,r.jsx)(n.code,{children:"stdout"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"The protocol used by this command is length-prefixed protobuf. This format is a repeated series of a varint followed by a record of the length indicated by said varint."}),"\n",(0,r.jsxs)(n.p,{children:["The protobuf spec for those records is described in ",(0,r.jsx)(n.code,{children:"buck2_subscription_proto/subscription.proto"}),". The client writes ",(0,r.jsx)(n.code,{children:"SubscriptionRequest"})," and reads ",(0,r.jsx)(n.code,{children:"SubscriptionResponse"}),". See the documentation in ",(0,r.jsx)(n.code,{children:"subscription.proto"})," to discover available APIs."]}),"\n",(0,r.jsx)(n.p,{children:"This API does not (currently) allow invalid requests and will error out when one is sent."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Usage"}),": ",(0,r.jsx)(n.code,{children:"buck2 subscribe [OPTIONS]"})]}),"\n",(0,r.jsx)(n.h3,{id:"options",children:"Options:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--active-commands"}),"\nWhether to request command snapshots"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--unstable-json"}),"\nWhether to get output as JSON. The JSON format is deemed unstable so this should only be used for debugging"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"-c, --config <SECTION.OPTION=VALUE>"}),"\nList of config options"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--config-file <PATH>"}),"\nList of config file paths"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"--fake-host <HOST>"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Possible values:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"default"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"linux"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"macos"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"windows"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"--fake-arch <ARCH>"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Possible values:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"default"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"aarch64"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"x8664"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--fake-xcode-version <VERSION-BUILD>"}),"\nValue must be formatted as: version-build (e.g., 14.3.0-14C18 or 14.1-14B47b)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--reuse-current-config"}),"\nRe-uses any ",(0,r.jsx)(n.code,{children:"--config"})," values (inline or via modefiles) if there's a previous command, otherwise the flag is ignored."]}),"\n",(0,r.jsxs)(n.p,{children:["If there is a previous command and ",(0,r.jsx)(n.code,{children:"--reuse-current-config"})," is set, then the old config is used, ignoring any overrides."]}),"\n",(0,r.jsx)(n.p,{children:"If there is no previous command but the flag was set, then the flag is ignored, the command behaves as if the flag was not set at all."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--exit-when-different-state"}),"\nUsed for exiting a concurrent command when a different state is detected"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--preemptible <PREEMPTIBLE>"}),"\nUsed to configure when this command could be preempted by another command for the same isolation dir."]}),"\n",(0,r.jsx)(n.p,{children:"Normally, when you run two commands - from different terminals, say - buck2 will attempt to run them in parallel. However, if the two commands are based on different state, that is they either have different configs or different filesystem states, buck2 cannot run them in parallel. The default behavior in this case is to block the second command until the first completes."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Possible values:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"never"}),": (default) When another command starts that cannot run in parallel with this one, block that command"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"always"}),": When another command starts, interrupt this command, ",(0,r.jsx)(n.em,{children:"even if they could run in parallel"}),". There is no good reason to use this other than that it provides slightly nicer superconsole output"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ondifferentstate"}),": When another command starts that cannot run in parallel with this one, interrupt this command"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--disable-starlark-types"}),"\nDisable runtime type checking in Starlark interpreter."]}),"\n",(0,r.jsx)(n.p,{children:"This option is not stable, and can be used only locally to diagnose evaluation performance problems."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--stack"}),"\nRecord or show target call stacks."]}),"\n",(0,r.jsx)(n.p,{children:"Starlark call stacks will be included in duplicate targets error."}),"\n",(0,r.jsxs)(n.p,{children:["If a command outputs targets (like ",(0,r.jsx)(n.code,{children:"targets"})," command), starlark call stacks will be printed after the targets."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--event-log <PATH>"}),"\nWrite events to this log file"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--write-build-id <PATH>"}),"\nWrite command invocation id into this file"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--unstable-write-invocation-record <PATH>"}),"\nWrite the invocation record (as JSON) to this path. No guarantees whatsoever are made regarding the stability of the format"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--command-report-path <PATH>"}),"\nWrite the command report to this path. A command report is always written to ",(0,r.jsx)(n.code,{children:"buck-out/v2/<uuid>/command_report"})," even without this flag"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);